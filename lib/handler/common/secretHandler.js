"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const AWS = require("aws-sdk");
const secretsManager = new AWS.SecretsManager();
exports.handler = async function (_event) {
    const secretName = process.env.SECRET_NAME;
    if (!secretName) {
        throw new Error('Environment variable SECRET_NAME is not defined');
    }
    try {
        const data = await secretsManager.getSecretValue({ SecretId: secretName }).promise();
        const secret = JSON.parse(data.SecretString);
        return {
            PhysicalResourceId: secretName,
            Data: {
                SecretValue: secret.key
            }
        };
    }
    catch (error) {
        console.error(error);
        throw new Error(`Error retrieving secret: ${error.message}`);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjcmV0SGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9oYW5kbGVyL2NvbW1vbi9zZWNyZXRIYW5kbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQStCO0FBQy9CLE1BQU0sY0FBYyxHQUFHLElBQUksR0FBRyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBRWhELE9BQU8sQ0FBQyxPQUFPLEdBQUcsS0FBSyxXQUFVLE1BQVk7SUFDM0MsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUM7SUFDM0MsSUFBSSxDQUFDLFVBQVUsRUFBRTtRQUNmLE1BQU0sSUFBSSxLQUFLLENBQUMsaURBQWlELENBQUMsQ0FBQztLQUNwRTtJQUNELElBQUk7UUFDRixNQUFNLElBQUksR0FBRyxNQUFNLGNBQWMsQ0FBQyxjQUFjLENBQUMsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNyRixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFhLENBQUMsQ0FBQztRQUM5QyxPQUFPO1lBQ0wsa0JBQWtCLEVBQUUsVUFBVTtZQUM5QixJQUFJLEVBQUU7Z0JBQ0osV0FBVyxFQUFFLE1BQU0sQ0FBQyxHQUFHO2FBQ3hCO1NBQ0YsQ0FBQztLQUNIO0lBQUMsT0FBTyxLQUFVLEVBQUU7UUFDbkIsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyQixNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztLQUM5RDtBQUNILENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFXUyBmcm9tICdhd3Mtc2RrJztcbmNvbnN0IHNlY3JldHNNYW5hZ2VyID0gbmV3IEFXUy5TZWNyZXRzTWFuYWdlcigpO1xuXG5leHBvcnRzLmhhbmRsZXIgPSBhc3luYyBmdW5jdGlvbihfZXZlbnQgOiBhbnkpIHtcbiAgY29uc3Qgc2VjcmV0TmFtZSA9IHByb2Nlc3MuZW52LlNFQ1JFVF9OQU1FO1xuICBpZiAoIXNlY3JldE5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vudmlyb25tZW50IHZhcmlhYmxlIFNFQ1JFVF9OQU1FIGlzIG5vdCBkZWZpbmVkJyk7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc2VjcmV0c01hbmFnZXIuZ2V0U2VjcmV0VmFsdWUoeyBTZWNyZXRJZDogc2VjcmV0TmFtZSB9KS5wcm9taXNlKCk7XG4gICAgY29uc3Qgc2VjcmV0ID0gSlNPTi5wYXJzZShkYXRhLlNlY3JldFN0cmluZyEpO1xuICAgIHJldHVybiB7XG4gICAgICBQaHlzaWNhbFJlc291cmNlSWQ6IHNlY3JldE5hbWUsXG4gICAgICBEYXRhOiB7XG4gICAgICAgIFNlY3JldFZhbHVlOiBzZWNyZXQua2V5XG4gICAgICB9XG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgcmV0cmlldmluZyBzZWNyZXQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufTtcbiJdfQ==